[gd_scene load_steps=34 format=3 uid="uid://semv70jqg34e"]

[ext_resource type="PackedScene" uid="uid://do35c715ctgi7" path="res://npcs/test_man/other_guy.tscn" id="1_ri83c"]
[ext_resource type="PackedScene" uid="uid://47y3qjxgnxm8" path="res://player/scenes/player.tscn" id="1_ybgaf"]
[ext_resource type="Script" uid="uid://i5jcj7ukvoen" path="res://addons/terrabrush/TerraBrush.cs" id="2_txoyx"]
[ext_resource type="Resource" uid="uid://bettqf2d8bj7m" path="res://environments/textures/texture_set.tres" id="3_hhivy"]
[ext_resource type="Shader" uid="uid://c3iwi0dduco0m" path="res://environments/shaders/water.gdshader" id="3_yl5gr"]
[ext_resource type="Texture2D" uid="uid://ihx6jkek0gjr" path="res://environments/beach/World/Heightmap_0_0.res" id="5_hhivy"]
[ext_resource type="Script" uid="uid://dgf8vwa2n8r11" path="res://addons/terrabrush/Scripts/EditorResources/FoliageDefinitionResource.cs" id="5_ri83c"]
[ext_resource type="Texture2D" uid="uid://cq31fx5rkd18i" path="res://environments/beach/World/Water_0_0.res" id="6_3qf2r"]
[ext_resource type="Script" uid="uid://d33x21vao7tj2" path="res://addons/terrabrush/Scripts/EditorResources/FoliageResource.cs" id="6_vmgc7"]
[ext_resource type="Texture2D" uid="uid://vn4tgvrrxwuy" path="res://environments/beach/World/Splatmap_0_0_0.res" id="7_3qf2r"]
[ext_resource type="Script" uid="uid://d2qebwt0ednya" path="res://addons/terrabrush/Scripts/EditorResources/ZoneResource.cs" id="7_4hkxj"]
[ext_resource type="Script" uid="uid://nt172hqpx1j5" path="res://addons/terrabrush/Scripts/EditorResources/ZonesResource.cs" id="8_57d7k"]
[ext_resource type="Texture2D" uid="uid://cwk5ycta2si3v" path="res://environments/beach/World/Foliage_0_0_0.res" id="10_vmgc7"]
[ext_resource type="PackedScene" uid="uid://gyv32knfwkg1" path="res://npcs/test_man/test_man.tscn" id="14_sovbs"]
[ext_resource type="Script" uid="uid://cnsu8rkv4vclo" path="res://environments/beach/water.gd" id="16_vmgc7"]
[ext_resource type="PackedScene" uid="uid://6eb3gsxdms3f" path="res://npcs/fishing_man/fishing_man.tscn" id="17_6w15t"]
[ext_resource type="ArrayMesh" uid="uid://d3sb2sp1f57vm" path="res://environments/models/buildings/tiles/door-rotate-square-b.obj" id="17_10mp2"]
[ext_resource type="Script" uid="uid://onyg7lf3hcvc" path="res://utils/scripts/interactable.gd" id="18_w05xj"]
[ext_resource type="Material" uid="uid://cpq441uyqkg54" path="res://utils/resources/highlight_material.tres" id="19_4507h"]
[ext_resource type="Script" uid="uid://b1regs7orop10" path="res://environments/scripts/scene_transition.gd" id="20_kkc5w"]
[ext_resource type="Script" uid="uid://qtep6gsamlqf" path="res://environments/scripts/exit_point.gd" id="21_ief57"]

[sub_resource type="Resource" id="Resource_57d7k"]
script = ExtResource("5_ri83c")
Strategy = 1
MeshScale = Vector3(1, 1, 1)
WindStrength = 0.1
VisualInstanceLayers = 1
LODLevels = 3
LODRowsPerLevel = 50
LODInitialCellWidth = 1.0
Albedo = Color(1, 1, 1, 1)
AlbedoTextures = []
NearestTextureFilter = false
UseGroundColor = false
CastShadow = false
UseBrushScale = true
RandomPlacementRange = 3.0
ApplyOnTextureIndexes = PackedInt32Array()
MaximumRenderDistance = 50
EditorMaximumRenderDistance = 50
metadata/_custom_type_script = "uid://dgf8vwa2n8r11"

[sub_resource type="Resource" id="Resource_ief57"]
script = ExtResource("6_vmgc7")
Definition = SubResource("Resource_57d7k")
metadata/_custom_type_script = "uid://d33x21vao7tj2"

[sub_resource type="Resource" id="Resource_hhivy"]
script = ExtResource("7_4hkxj")
ZonePosition = Vector2i(0, 0)
HeightMapTexture = ExtResource("5_hhivy")
SplatmapsTexture = [ExtResource("7_3qf2r")]
FoliagesTexture = [ExtResource("10_vmgc7")]
ObjectsTexture = []
WaterTexture = ExtResource("6_3qf2r")

[sub_resource type="Resource" id="Resource_3qf2r"]
script = ExtResource("8_57d7k")
Zones = [SubResource("Resource_hhivy")]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_smrik"]
render_priority = 0
shader = ExtResource("3_yl5gr")
shader_parameter/WATER_COL = Color(0.00854927, 0.205342, 0.5087, 1)
shader_parameter/WATER2_COL = Color(0.948115, 0.868779, 0.583123, 1)
shader_parameter/FOAM_COL = Color(0.96891, 0.892931, 0.975747, 1)
shader_parameter/distortion_speed = 0.5
shader_parameter/tile = Vector2(1000, 1000)
shader_parameter/wave_speed = 1.0
shader_parameter/wave_amplitude = 1.0
shader_parameter/wave_frequency = 1.5
shader_parameter/time_offset = 0.0
shader_parameter/water_size = Vector2(128, 128)
shader_parameter/water_transparency = 0.9
shader_parameter/water_depth_factor = 0.5
shader_parameter/foam_width = 1.0
shader_parameter/foam_edge_softness = 0.05
shader_parameter/foam_smoothness = 0.03
shader_parameter/foam_distortion_speed = 0.5
shader_parameter/foam_distortion_amount = 0.1

[sub_resource type="PlaneMesh" id="PlaneMesh_xk8tw"]
material = SubResource("ShaderMaterial_smrik")
size = Vector2(1000, 1000)
subdivide_width = 100
subdivide_depth = 100

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_ri83c"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_o6wd3"]
sky_top_color = Color(0.405852, 0.358927, 0.852183, 1)
sky_horizon_color = Color(0.957461, 0.527158, 0.141781, 1)

[sub_resource type="Sky" id="Sky_3436y"]
sky_material = SubResource("ProceduralSkyMaterial_o6wd3")

[sub_resource type="Environment" id="Environment_gm3d4"]
background_mode = 2
sky = SubResource("Sky_3436y")
ambient_light_source = 3

[sub_resource type="BoxShape3D" id="BoxShape3D_inj3g"]
size = Vector3(0.147461, 2.2207, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ief57"]
albedo_color = Color(0.52549, 1, 1, 1)

[node name="World" type="Node3D"]

[node name="Green" parent="." instance=ExtResource("1_ri83c")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -96.9574, 2.87185, 95.1051)

[node name="Player" parent="." instance=ExtResource("1_ybgaf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -69.8671, 2.63085, 99.8133)

[node name="TerraBrush" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -75)
script = ExtResource("2_txoyx")
ZonesSize = 512
DataPath = "res://environments/beach/World"
CollisionLayers = 3
CollisionMask = 3
TextureSets = ExtResource("3_hhivy")
Foliages = [SubResource("Resource_ief57")]
Objects = []
TerrainZones = SubResource("Resource_3qf2r")
metadata/_custom_type_script = "uid://i5jcj7ukvoen"
metadata/_edit_lock_ = false

[node name="Water" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 423.519)
mesh = SubResource("PlaneMesh_xk8tw")
skeleton = NodePath("")

[node name="WaterPhysics" type="Area3D" parent="Water" groups=["fishable"]]
gravity_space_override = 3
gravity_point_center = Vector3(0, 1, 0)
gravity_direction = Vector3(0, 1, 0)
linear_damp = 100.0
script = ExtResource("16_vmgc7")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Water/WaterPhysics"]
shape = SubResource("WorldBoundaryShape3D_ri83c")
debug_color = Color(0.890196, 0.309804, 0.290196, 0.760784)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_gm3d4")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.636401, 0.771358, 0, -0.771358, 0.636401, 0, 0, 0)
light_color = Color(0.997725, 0.951909, 0.861173, 1)
shadow_enabled = true

[node name="Node3D" parent="." instance=ExtResource("14_sovbs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -96.4394, 3.1344, 100.028)

[node name="Green2" parent="." instance=ExtResource("17_6w15t")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -70.0437, 2.16728, 94.4847)

[node name="Door-rotate-square-b" type="MeshInstance3D" parent="."]
transform = Transform3D(0.258819, 0, -0.965926, 0, 1, 0, 0.965926, 0, 0.258819, -69.8513, 1, 86.0089)
mesh = ExtResource("17_10mp2")

[node name="Interactable" type="Area3D" parent="Door-rotate-square-b"]
script = ExtResource("18_w05xj")
metadata/_custom_type_script = "uid://onyg7lf3hcvc"

[node name="CollisionShape3D" type="CollisionShape3D" parent="Door-rotate-square-b/Interactable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0.42075)
shape = SubResource("BoxShape3D_inj3g")

[node name="Highlight" type="Node3D" parent="Door-rotate-square-b"]
visible = false

[node name="Door-rotate-square-b" type="MeshInstance3D" parent="Door-rotate-square-b/Highlight"]
material_override = ExtResource("19_4507h")
mesh = ExtResource("17_10mp2")
skeleton = NodePath("../..")

[node name="SceneTransition" type="Node" parent="Door-rotate-square-b"]
script = ExtResource("20_kkc5w")
file = "uid://o3qnly1rjefv"

[node name="ExitPoint" type="Marker3D" parent="Door-rotate-square-b"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.326286, 1, 0.371101)
visible = false
script = ExtResource("21_ief57")
metadata/_custom_type_script = "uid://qtep6gsamlqf"

[node name="Door2D" type="MeshInstance3D" parent="."]
transform = Transform3D(0.258819, 0, -0.965926, 0, 1, 0, 0.965926, 0, 0.258819, -72.8513, 1, 86.0089)
material_override = SubResource("StandardMaterial3D_ief57")
mesh = ExtResource("17_10mp2")

[node name="Interactable" type="Area3D" parent="Door2D"]
script = ExtResource("18_w05xj")
metadata/_custom_type_script = "uid://onyg7lf3hcvc"

[node name="CollisionShape3D" type="CollisionShape3D" parent="Door2D/Interactable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0.42075)
shape = SubResource("BoxShape3D_inj3g")

[node name="Highlight" type="Node3D" parent="Door2D"]
visible = false

[node name="Door-rotate-square-b" type="MeshInstance3D" parent="Door2D/Highlight"]
material_override = ExtResource("19_4507h")
mesh = ExtResource("17_10mp2")
skeleton = NodePath("../..")

[node name="SceneTransition" type="Node" parent="Door2D"]
script = ExtResource("20_kkc5w")
file = "uid://bht10866y8fy2"

[node name="ExitPoint" type="Marker3D" parent="Door2D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.326286, 1, 0.371101)
visible = false
script = ExtResource("21_ief57")
id = 1
metadata/_custom_type_script = "uid://qtep6gsamlqf"

[node name="Door2D2" type="MeshInstance3D" parent="."]
transform = Transform3D(0.965926, 0, 0.258819, 0, 1, 0, -0.258819, 0, 0.965926, -100.851, 2, 101.009)
material_override = SubResource("StandardMaterial3D_ief57")
mesh = ExtResource("17_10mp2")

[node name="Interactable" type="Area3D" parent="Door2D2"]
script = ExtResource("18_w05xj")
metadata/_custom_type_script = "uid://onyg7lf3hcvc"

[node name="CollisionShape3D" type="CollisionShape3D" parent="Door2D2/Interactable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0.42075)
shape = SubResource("BoxShape3D_inj3g")

[node name="Highlight" type="Node3D" parent="Door2D2"]
visible = false

[node name="Door-rotate-square-b" type="MeshInstance3D" parent="Door2D2/Highlight"]
material_override = ExtResource("19_4507h")
mesh = ExtResource("17_10mp2")
skeleton = NodePath("../..")

[node name="SceneTransition" type="Node" parent="Door2D2"]
script = ExtResource("20_kkc5w")
file = "uid://bht10866y8fy2"
exit_id = 1

[node name="ExitPoint" type="Marker3D" parent="Door2D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.326286, 1, 0.371101)
visible = false
script = ExtResource("21_ief57")
id = 2
metadata/_custom_type_script = "uid://qtep6gsamlqf"

[connection signal="body_entered" from="Water/WaterPhysics" to="Water/WaterPhysics" method="_on_body_entered"]
[connection signal="body_exited" from="Water/WaterPhysics" to="Water/WaterPhysics" method="_on_body_exited"]
[connection signal="hide_highlight" from="Door-rotate-square-b/Interactable" to="Door-rotate-square-b/Highlight" method="hide"]
[connection signal="interacted" from="Door-rotate-square-b/Interactable" to="Door-rotate-square-b/SceneTransition" method="transition"]
[connection signal="show_highlight" from="Door-rotate-square-b/Interactable" to="Door-rotate-square-b/Highlight" method="show"]
[connection signal="hide_highlight" from="Door2D/Interactable" to="Door2D/Highlight" method="hide"]
[connection signal="interacted" from="Door2D/Interactable" to="Door2D/SceneTransition" method="transition"]
[connection signal="show_highlight" from="Door2D/Interactable" to="Door2D/Highlight" method="show"]
[connection signal="hide_highlight" from="Door2D2/Interactable" to="Door2D2/Highlight" method="hide"]
[connection signal="interacted" from="Door2D2/Interactable" to="Door2D2/SceneTransition" method="transition"]
[connection signal="show_highlight" from="Door2D2/Interactable" to="Door2D2/Highlight" method="show"]
